ë„¤, ì œê³µí•´ì£¼ì‹  PDF íŒŒì¼(í¬íŠ¸í´ë¦¬ì˜¤, ì œì•ˆì„œ)ì„ ë‹¤ì‹œ ì •ë°€ ê²€í† í•œ ê²°ê³¼, ì•ì„œ ì‘ì„±í•´ ë“œë¦° READMEëŠ” **'í•µì‹¬ ìš”ì•½'**ì— ê°€ê¹Œì› ìœ¼ë©°, **í¬íŠ¸í´ë¦¬ì˜¤ë¡œì„œ ì–´í•„í•  ìˆ˜ ìˆëŠ” 'ê¸°ìˆ ì  ê¹Šì´(Raw Data, ìˆ˜í•™ì  ìœ ë„ ê³¼ì •, í•˜ë“œì›¨ì–´ ì œì•½ ì‚¬í•­)'** ì¼ë¶€ê°€ ìƒëµëœ ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.

PDFì— í¬í•¨ë˜ì–´ ìˆìœ¼ë‚˜ ì´ì „ ë²„ì „ì— ë¹ ì¡Œë˜, **ê°œë°œìë¡œì„œì˜ ì—­ëŸ‰ì„ ì¦ëª…í•  ìˆ˜ ìˆëŠ” ë””í…Œì¼í•œ ë‚´ìš©(Raw Data ì˜ˆì‹œ, ë² ì´ì§€ì•ˆ í•„í„° ìœ ë„ ìˆ˜ì‹, ì „ì› ì´ìŠˆ ë“±)**ì„ ëª¨ë‘ í¬í•¨í•˜ì—¬ **ì™„ì „íŒ README.md**ë¥¼ ë‹¤ì‹œ ì‘ì„±í•´ ë“œë¦½ë‹ˆë‹¤.

ìš°ì¸¡ ìƒë‹¨ì˜ `Copy` ë²„íŠ¼ì„ ëˆŒëŸ¬ ë°”ë¡œ ì‚¬ìš©í•˜ì‹œë©´ ë©ë‹ˆë‹¤.

```markdown
# ğŸƒâ€â™‚ï¸ GPS & Kalman Filter Based Healthcare Gamification Platform

> **Real-time Sensor Fusion & Territory Capture Project**
>
> *ê¸°ì„±í’ˆ ì›¨ì–´ëŸ¬ë¸”ì˜ API ì—°ë™ì„ ë„˜ì–´, í•˜ë“œì›¨ì–´ ì„¤ê³„ë¶€í„° Raw ë°ì´í„° ìˆ˜ì§‘, ë² ì´ì§€ì•ˆ í•„í„°(Bayesian Filter) ê¸°ë°˜ì˜ ìœ„ì¹˜ ì¶”ì • ì•Œê³ ë¦¬ì¦˜ê¹Œì§€ ì§ì ‘ êµ¬í˜„í•˜ëŠ” í’€ìŠ¤íƒ í—¬ìŠ¤ì¼€ì–´ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.*

---

## ğŸ“– Project Philosophy: Why Build from Scratch?

### 1. Beyond APIs: Handling Raw Data
ëŒ€ë¶€ë¶„ì˜ ì„œë¹„ìŠ¤ëŠ” OSê°€ ê°€ê³µí•´ì£¼ëŠ” ê¹”ë”í•œ ìœ„ì¹˜ ì •ë³´(Latitude, Longitude)ë§Œì„ ì‚¬ìš©í•©ë‹ˆë‹¤. [cite_start]í•˜ì§€ë§Œ ì´ í”„ë¡œì íŠ¸ëŠ” **ë‚ ê²ƒì˜ ë°ì´í„°(Raw Data)**ë¥¼ ì§ì ‘ ë‹¤ë£¹ë‹ˆë‹¤. [cite: 9, 276]
* **GPS NMEA Strings:** ìœ„ì„±ì—ì„œ ìˆ˜ì‹ ëœ Raw Stringì„ íŒŒì‹±í•©ë‹ˆë‹¤.
* **Sensor Fusion:** ê°€ì†ë„, ìì´ë¡œ, ì§€ìê¸° ì„¼ì„œì˜ ë¬¼ë¦¬ì  ë°ì´í„°ë¥¼ ìœµí•©í•˜ì—¬ ì˜¤ì°¨ë¥¼ ë³´ì •í•©ë‹ˆë‹¤.

### 2. Engineering Challenge
* [cite_start]**Differentiation:** "ë»”í•œ í¬íŠ¸í´ë¦¬ì˜¤"ì™€ì˜ ì°¨ë³„ì ì€ "ì§ì ‘ ë§Œë“œëŠ” ê²ƒ"ì— ìˆìŠµë‹ˆë‹¤. [cite: 7, 8, 274, 275]
* [cite_start]**Complexity:** ë‹¨ìˆœí•œ êµ¬í˜„ì´ ì•„ë‹Œ, í™•ë¥ ì  ë¡œë³´í‹±ìŠ¤(Probabilistic Robotics)ì™€ ì„ë² ë””ë“œ í•˜ë“œì›¨ì–´ì˜ ì œì•½ ì‚¬í•­ì„ ê·¹ë³µí•˜ëŠ” ê³¼ì •ì„ ë‹´ì•˜ìŠµë‹ˆë‹¤. [cite: 13, 280]

---

## ğŸ— System Architecture & Hardware

### 1. Hardware Block Diagram (ASCII)
```text
+---------------------------------------------------------------+
|                      Wearable Device (H/W)                    |
|                                                               |
|  [ GPS Module ]         [ IMU Sensor ]      [ HR Sensor ]     |
|   (NEO-M9N)              (MPU-9250)          (MAX30102)       |
|       | UART                 | I2C                | I2C       |
|       v                      v                    v           |
|  +---------------------------------------------------------+  |
|  |                  ESP32-S3 (Main MCU)                    |  |
|  |             (Dual Core 240MHz, FreeRTOS)                |  |
|  |---------------------------------------------------------|  |
|  |   1. Data Acquisition (100Hz Sampling)                  |  |
|  |   2. Pre-processing (Noise Filtering)                   |  |
|  |   3. Extended Kalman Filter (State Estimation)          |  |
|  |   4. Gamification Logic (Zone Calc)                     |  |
|  +---------------------------+-----------------------------+  |
|                              |                                |
|          (BLE 5.0)           |            (SPI)               |
|              v               v                                |
+--------------+---------------|--------------------------------+
               |               |
               v               v
    +-------------------+   +---------------------+
    |  Smartphone App   |   |   Local Storage     |
    | (Visualization)   |   | (SD Card Logging)   |
    +-------------------+   +---------------------+

```

2. Hardware Specifications & Constraints 

| Component | Model | Interface | Key Specs & Constraints |
| --- | --- | --- | --- |
| **MCU** | **ESP32-S3** | - | Dual Core, WiFi/BLE, 3.3V Logic |
| **GPS** | **NEO-M9N** | UART | GNSS Multi-band, 1.5m CEP, 25mW |
| **IMU** | **MPU-9250** | I2C (0x68) | <br>**9-Axis** (Accel/Gyro/Mag), **200Hz** Sampling 

 |
| **Heart Rate** | **MAX30102** | I2C | PPG (Optical), SpO2 |
| **Power** | **LiPo 500mAh** | - | <br>**Issue:** 3.7V Battery vs 3.3V MCU Logic â†’ Regulator Required 

 |

---

## ğŸ“Š Data Protocol & Raw Data Analysis

ì‹¤ì œ ì„¼ì„œì—ì„œ ìˆ˜ì§‘ë˜ì–´ ì²˜ë¦¬ë˜ëŠ” ë°ì´í„°ì˜ í˜•íƒœì…ë‹ˆë‹¤. 

### 1. GPS (NMEA 0183 Standard)

MCUëŠ” ìœ„ì„±ìœ¼ë¡œë¶€í„° ì•„ë˜ì™€ ê°™ì€ ë¬¸ìì—´ì„ ìˆ˜ì‹ í•˜ì—¬ `lat`, `lon`, `time`ì„ íŒŒì‹±í•©ë‹ˆë‹¤. 

```text
$GPGGA,092750.000,3723.4657,N,12202.2694,W,1,8,1.03,61.7,M,-21.3,M,,*5C
$GPRMC,092750.000,A,3723.4657,N,12202.2694,W,0.02,31.66,280423,,,A*43

```

### 2. IMU (9-Axis Vector)

ì„¼ì„œ í“¨ì „ì„ ìœ„í•œ 9ì¶• ë°ì´í„° ì˜ˆì‹œì…ë‹ˆë‹¤. (Sampling Rate: ~100Hz) 

* **Accelerometer:**  (Gravity detected)
* **Gyroscope:** 
* **Magnetometer:** 

### 3. PPG (Heart Rate)

ì ì™¸ì„ (IR)ê³¼ ì ìƒ‰ê´‘(Red)ì˜ ë°˜ì‚¬ê°’ì„ ì‹œê³„ì—´ë¡œ ë¶„ì„í•©ë‹ˆë‹¤. 

```text
IR: [50213, 50198, 50245, 50312, 50456 ...]
Red: [48123, 48156, 48201, 48267, 48398 ...]

```

---

## ğŸ“ Core Algorithm: Bayesian to Kalman Filter

GPS ë°ì´í„°ì˜ ì˜¤ì°¨ë¥¼ ë³´ì •í•˜ê¸° ìœ„í•´ **ë² ì´ì§€ì•ˆ í•„í„°(Bayesian Filter)**ì˜ ì›ë¦¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ì¹¼ë§Œ í•„í„°ë¥¼ ì ìš©í–ˆìŠµë‹ˆë‹¤. 

### 1. Mathematical Foundation (Bayesian Filter)

í˜„ì¬ ìƒíƒœ ì— ëŒ€í•œ ë¯¿ìŒ(Belief) $bel(x_t)$ëŠ” **ì˜ˆì¸¡(Prediction)**ê³¼ **ë³´ì •(Correction)** ë‹¨ê³„ë¡œ ê°±ì‹ ë©ë‹ˆë‹¤. 

* **Prediction:** ì´ì „ ìƒíƒœë¡œë¶€í„° í˜„ì¬ ìƒíƒœ ì˜ˆì¸¡ (Motion Model)
* **Correction:** ì„¼ì„œ ì¸¡ì •ê°’()ì„ ë°˜ì˜í•˜ì—¬ í™•ë¥  ë³´ì • (Observation Model)

### 2. Implementation (Extended Kalman Filter)

ìœ„ ë² ì´ì§€ì•ˆ ì´ë¡ ì„ ì„ í˜• ê°€ìš°ìŠ¤ ëª¨ë¸ì— ì ìš©í•œ ì‹œìŠ¤í…œ ìƒíƒœ ë²¡í„°ì…ë‹ˆë‹¤. 

* **State Update:**
$$ \hat{x}*{k} = \hat{x}*{k|k-1} + K_{k}(z_{k} - H\hat{x}_{k|k-1}) $$

---

## ğŸ® Gamification Logic: Territory Capture

ì‚¬ìš©ìì˜ ìš´ë™ ë™ê¸°ë¥¼ ë¶€ì—¬í•˜ê¸° ìœ„í•´ 'ì˜ì—­ ê°ì‹¸ê¸°'ì™€ 'ì‹¬ë°•ìˆ˜ ê¸°ë°˜ ì ìˆ˜' ì‹œìŠ¤í…œì„ ë„ì…í–ˆìŠµë‹ˆë‹¤.

1. Dynamic Scoring (Heart Rate Zones) 

ë‹¨ìˆœ ê±°ë¦¬ ì´ë™ì´ ì•„ë‹Œ, **ìš´ë™ ë¶€í•˜(ì‹¬ë°•ìˆ˜)**ì— ë”°ë¼ ì ìˆ˜ë¥¼ ì°¨ë“± ì§€ê¸‰í•©ë‹ˆë‹¤.

* **Zone 1-2 (Walking/Warm-up):** Score 
* **Zone 3-4 (Cardio/Hard):** Score 

2. Territory Validation 

* **Algorithm:** Point-in-Polygon (Ray Casting)
* **Logic:** ì‚¬ìš©ìì˜ GPS ê²½ë¡œê°€ ë‹«íŒ ë‹¤ê°í˜•(Closed Polygon)ì„ í˜•ì„±í•˜ë©´ í•´ë‹¹ ì˜ì—­ì„ 'ì •ë³µ'í•œ ê²ƒìœ¼ë¡œ íŒì •í•©ë‹ˆë‹¤.

---

## ğŸ’¾ Data Engineering Pipeline (Kafka)

ê³ ë¹ˆë„ ì„¼ì„œ ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ë°ì´í„° íŒŒì´í”„ë¼ì¸ ì„¤ê³„ì…ë‹ˆë‹¤. 

| Topic Name | Partition Key | Payload | Throughput | Retention | Features |
| --- | --- | --- | --- | --- | --- |
| `raw.gps.events` | `user_id` | Lat, Lon, Acc, Time | ~1 msg/sec | 7 Days | ì‚¬ìš©ìë³„ ìˆœì„œ ë³´ì¥ í•„ìˆ˜ |
| `raw.hr.events` | `user_id` | BPM, RR Interval | ~1 msg/sec | 7 Days | HRV ë¶„ì„ìš© ë°ì´í„° í¬í•¨ |
| `raw.imu.events` | `user_id` | Acc[3], Gyro[3], Mag[3] | **~50 msg/sec** | **3 Days** | ê³ ë¹ˆë„ ë°ì´í„°, ìš©ëŸ‰ ìµœì í™”ë¥¼ ìœ„í•´ **ì§§ì€ ë³´ì¡´ ê¸°ê°„** ì„¤ì • |

---

